flood:
  image:
    repository: jesec/flood
    tag: 4.5.4

  env:
    FLOOD_OPTION_rundir: /data
    FLOOD_OPTION_auth: none

  ingress:
    enabled: true
    domainName: "nickflix.io"
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      traefik.ingress.kubernetes.io/router.priority: "10"
      traefik.ingress.kubernetes.io/router.middlewares: cajun-pro-organizr-auth-0@kubernetescrd,cajun-pro-redirectregex@kubernetescrd
    hosts:
      - hostTpl: '{{ .Values.ingress.domainName }}'
        paths:
          - pathTpl: '{{ printf "/flood/%s" .Values.ingress.iteration }}'
            pathType: Prefix
    tls:
      - hostsTpl: ['{{ .Values.ingress.domainName }}']
        secretNameTpl: '{{ .Values.ingress.domainName | replace "." "-" }}'

  persistence:
    data:
      enabled: true
      nameSuffix: "-"
      mountPath: /data
      storageClass: rook-ceph-block
      accessMode: ReadWriteOnce
      size: 1Gi
      skipuninstall: true

  tolerations:
    - key: role
      value: storage
      effect: NoSchedule

  nodeSelector:
    node-role.kubernetes.io/storage: ""

  resources:
    requests:
      cpu: 100m
      memory: 128m


